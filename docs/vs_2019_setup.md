# VisualStudio 2019 CMake Setup

VisualStudio 2019 now provides comprehensive support for CMake projects with extensive integration. VS2019 utilizes Ninja CMake generator to get the job done.

## Introduction

Upon opening a CMake project in VisualStudio 2019, the default behavior is to attempt a CMake run using x86-Debug or x64-Debug (depending on your host-system).
VS2019 generates a CMakeSettings.json to configure the CMake cached variables. To make things easy, VS2019 provides a UI binding to the CMakeSettings.json to provide
a table of the cached variables and their default values. You can either directly edit the JSON or use the UI to provide CMake your system configurations.

## Configuring

1. Specify the toolchain file
![toolchain_field](/docs/assets/cmakesettingsjson_toolchain.png)
2. VS2019 provides default CMAKE_C_FLAGS. Ensure this field is empty to start.
3. Fill out the fields in the CMakeSetting.json according to your system and as defined by [Building](https://github.com/jensen-miller/sam-cmake-template#building) section.
![settings_variables](/docs/assets/cmakesettingsjson_variables.png)


## Troubleshooting

- Getting the error: '._init_' is not defined (generated by the linker)
	+ Typically, this means you may have missed clearing the CMAKE_C_FLAGS field in the CMakeSettings.json. By default, CMAKE_C_FLAGS contains the flag '-nostartfiles'
		which causes this error.